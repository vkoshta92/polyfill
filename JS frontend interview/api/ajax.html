<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ajax</title>
  </head>
  <body>
    <script>
      const url = "https://jsonplaceholder.typicode.com/users";
function myAjax(method,url,body=null){
    return new Promise((res,err)=>{
        const xhr= new XMLHttpRequest();
xhr.open(method,url);
//event
xhr.setRequestHeader("Content-Type","application/json")
xhr.responseType='json';
xhr.onload=()=>{
    console.log(xhr.status);
    if(xhr.status>=400){
        err(xhr.response);

        err("fail ho gya")
    }
    else{
        res(xhr.response);
    }
   
    // console.log(xhr.response); // string me
}

    xhr.send(JSON.stringify(body)); // kyoko hme string me bhejne h objject me nhi.
    })
}
myAjax('POST',url,{
    name:"vishnu",
    food:"dosa"
}).then((res)=>{
console.log(res);
}).catch((ERROR)=>{
console.log(ERROR);
})

    </script>
  </body>
</html>

